function SSChordsLib(n){this.settings={femaleColor:"pink",maleColor:"cyan",chordColor:"orange",notes:["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],notes_altered:["C#","C","D","Eb","E","F#","F","G","Ab","A","Bb","B"],forms:["maj7","maj9","sus7","dim7","maj","sus4","sus2","sus","dim","aug","m7","m9","m","7","9","+",""]};Object.assign(this.settings,n);var t=document.createElement("style");t.innerHTML="c{position:absolute;margin-top:-1em;color:"+this.settings.chordColor+";}pre>c{ margin-top:0px;}c::after{content: attr(r); margin-top:-0.2em;position:absolute;}sex[f='1']{color:"+this.settings.femaleColor+";}sex[f='0']{color:"+this.settings.maleColor+";}";document.body.appendChild(t)}SSChordsLib.prototype.format=function(n){for(var t=this.unformat(n),i,e,u,f,r,t=this.replaceAll(n,"\n","<br/>");t.indexOf("[[")>=0;){if(u=t.indexOf("[["),f=t.indexOf("]]",u)+2,f<=2)break;i=e=t.substring(u,f);i=this.replaceAll(i,"/&","/&nbsp;&nbsp;&");i=this.replaceAll(i,"/ &","/&nbsp;&nbsp;&");i=this.replaceAll(i,"/-","/&nbsp;&nbsp;&nbsp;-");i=this.replaceAll(i,"/ -","/&nbsp;&nbsp;&nbsp;-");i=this.replaceAll(i,"-/","-&nbsp;&nbsp;&nbsp;/");i=this.replaceAll(i,"- /","-&nbsp;&nbsp;&nbsp;/");i=this.replaceAll(i,"[[","<pre>");i=this.replaceAll(i,"]]","<\/pre>");t=this.replaceAll(t,e,i)}return r=this,r.settings.notes_altered.forEach(function(n){r.settings.forms.forEach(function(i){t=r.replaceAll(t,"&"+n+i,"<c chord='"+n+"' r='"+i+"'>"+n+"<\/c>")})}),t=this.replaceAll(t,"&/","<c>/<\/c>"),t=this.replaceAll(t,"  ","&nbsp;&nbsp;"),t=this.replaceAll(t,"   ","&nbsp;&nbsp;&nbsp;"),t=this.replaceAll(t,"     ","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),t=this.replaceAll(t,"f{{","<sex f='1'>"),t=this.replaceAll(t,"m{{","<sex f='0'>"),t=this.replaceAll(t,"}}","<\/sex>"),t=this.replaceAll(t,"<\/c>/","<\/c>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/"),t=this.replaceAll(t,"<\/c> /","<\/c>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/")};SSChordsLib.prototype.unformat=function(n){var i=n,t=document.createElement("div"),r;return t.innerHTML=n,t.querySelectorAll("c").forEach(function(n){r=n.getAttribute("chord")||"/";n.replaceWith("&"+r)}),t.querySelectorAll("br").forEach(function(n){n.replaceWith("\n")}),t.querySelectorAll("pre").forEach(function(n){n.replaceWith("[["+n.innerHTML.replaceAll("<br/>","\n")+"]]")}),t.querySelectorAll("sex").forEach(function(n){n.getAttribute("f")=="1"?n.replaceWith("f{{"+n.innerHTML+"}}"):n.replaceWith("m{{"+n.innerHTML+"}}")}),i=this.replaceAll(t.innerText,"&nbsp;"," "),this.replaceAll(i,"&amp;","&")};SSChordsLib.prototype.transpose=function(n,t){var u,i,r=this;n.querySelectorAll("c").forEach(function(n){u=n.getAttribute("chord");r.settings.notes.forEach(function(f,e){f==u&&(i=e+t,i<0&&(i=r.settings.notes.length-1),i>=r.settings.notes.length&&(i=0),n.setAttribute("chord",r.settings.notes[i]),n.innerHTML=r.settings.notes[i])})})};SSChordsLib.prototype.allChords=function(n){var t="",i;return n.querySelectorAll("c").forEach(function(n){i=n.getAttribute("chord")||"";i!=""&&(","+t+",").indexOf(i)<0&&(t!=""&&(t+=","),t+=i)}),t};SSChordsLib.prototype.replaceAll=function(n,t,i){return n.split(t).join(i)};